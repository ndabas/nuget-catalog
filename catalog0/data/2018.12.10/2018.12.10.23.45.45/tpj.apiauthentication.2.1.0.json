{
  "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json",
  "@type": [
    "PackageDetails",
    "catalog:Permalink"
  ],
  "authors": "TPJ.ApiAuthentication",
  "catalog:commitId": "dd4cd743-9ac2-4a92-b0ac-db08569e9ec9",
  "catalog:commitTimeStamp": "2018-12-10T23:45:45.1726272Z",
  "created": "2016-08-25T14:20:14.1Z",
  "description": "TPJ.ApiAuthentication",
  "id": "TPJ.ApiAuthentication",
  "isPrerelease": false,
  "language": "en",
  "lastEdited": "2018-12-10T23:45:44.51Z",
  "listed": false,
  "packageHash": "kQtMhHraLxW33fOzz6+9r48xe/xD+QxeIdBmeNJXFEUZsBjDyPv0PYGiH6t2UU9p/QyETxmsdGplafbhUOA0qw==",
  "packageHashAlgorithm": "SHA512",
  "packageSize": 22893,
  "published": "1900-01-01T00:00:00Z",
  "releaseNotes": "ASP.Net Core Website Set up \n\nCreate appsettings.json file and add the following \n\n{\n  \"TPJ\": {\n    \"APIAuthentication\": {\n      \"EncryptionKey\": \"\",\n      \"KeepAliveTime\": \"\"\n    }\n  }\n}\n\n\nEncryptionKey - value used to encrypt the data - must be the same on both side (encryption (website) and decryption (API))\n\nKeepAliveTime - (Not required) How long the token created is valied for in seconds - this is only needed on the decryption side\n\nFor Websites - \n\nOpen StartUp.cs file and go to ConfigureServices \n\nAdd the following\n\nint keepAliveTime = 0;\nint.TryParse(Configuration[\"TPJ:APIAuthentication:KeepAliveTime\"], out keepAliveTime);\n\nservices.Configure<TPJ.ApiAuthentication.Models.ApiAuthenticationProperties>(options =>\n{\n\toptions.EncryptionKey = Configuration[\"TPJ:APIAuthentication:EncryptionKey\"];\n\toptions.KeepAliveTime = keepAliveTime;\n});\n\nservices.AddTransient<TPJ.ApiAuthentication.Interfaces.IApiAuthentication, TPJ.ApiAuthentication.ApiAuthentication>(); \n\nThen using DI within asp.net core you can call IApiAuthentication like so -\n\nprivate readonly TPJ.ApiAuthentication.Interfaces.IApiAuthentication _apiAuthentication;\n\npublic AuthenticationApiController(TPJ.ApiAuthentication.Interfaces.IApiAuthentication apiAuthentication)\n{\n\t_apiAuthentication = apiAuthentication;\n}\n\n[HttpGet]\npublic JsonResult Get()\n{\n\treturn new JsonResult(_apiAuthentication.GetEncryptedToken(HttpContext.User.Identity.Name));\n}\n\nThis will encrypt the AD name of the current user and return the token. Then on your API side you may do the following - \n\npublic AuthenticationApiController(TPJ.ApiAuthentication.Interfaces.IApiAuthentication apiAuthentication)\n{\n\t_apiAuthentication = apiAuthentication;\n}\n\n[HttpGet]\n[Route(\"GetCoolStuffById\")]\npublic IActionResult GetCoolStuffById(string token, int coolStuffId)\n{\n\tvar authenticatedModel = _apiAuthentication.IsAuthenticated(token);\n\n\tif (!authenticatedModel.IsAuthenticated)\n\t\tthrow new UnauthorizedException();\n\n\tvar user = _context.Users.First(x => x.AD == authenticatedModel.Value);\n\n\tif(user == null)\t\t\n\t\tthrow new UnauthorizedException();\n\t\t\n\treturn _context.CoolStuff.First(x => x.Id == coolStuffId);\n}\n\nThis will take the token and decrypt it and check if its authenticated base on the time since the token was created (this uses the config \"KeepAliveTime\") and the API key. It returns a model with -\n\nIsAuthenticated - bool - is authenticated [True] else [False] not authenticated\nValue - string - value that was encrpyed (in this case the AD name)",
  "requireLicenseAcceptance": false,
  "title": "TPJ.ApiAuthentication",
  "verbatimVersion": "2.1.0",
  "version": "2.1.0",
  "dependencyGroups": [
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.5.2",
      "@type": "PackageDependencyGroup",
      "dependencies": [
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.5.2/microsoft.extensions.configuration.abstractions",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Configuration.Abstractions",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.5.2/microsoft.extensions.options",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Options",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.5.2/netstandard.library",
          "@type": "PackageDependency",
          "id": "NETStandard.Library",
          "range": "[1.6.0, )"
        }
      ],
      "targetFramework": ".NETFramework4.5.2"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6",
      "@type": "PackageDependencyGroup",
      "dependencies": [
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6/microsoft.extensions.configuration.abstractions",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Configuration.Abstractions",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6/microsoft.extensions.options",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Options",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6/netstandard.library",
          "@type": "PackageDependency",
          "id": "NETStandard.Library",
          "range": "[1.6.0, )"
        }
      ],
      "targetFramework": ".NETFramework4.6"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6.1",
      "@type": "PackageDependencyGroup",
      "dependencies": [
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6.1/microsoft.extensions.configuration.abstractions",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Configuration.Abstractions",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6.1/microsoft.extensions.options",
          "@type": "PackageDependency",
          "id": "Microsoft.Extensions.Options",
          "range": "[1.0.0, )"
        },
        {
          "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#dependencygroup/.netframework4.6.1/netstandard.library",
          "@type": "PackageDependency",
          "id": "NETStandard.Library",
          "range": "[1.6.0, )"
        }
      ],
      "targetFramework": ".NETFramework4.6.1"
    }
  ],
  "packageEntries": [
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#TPJ.ApiAuthentication.nuspec",
      "@type": "PackageEntry",
      "compressedLength": 1364,
      "fullName": "TPJ.ApiAuthentication.nuspec",
      "length": 4142,
      "name": "TPJ.ApiAuthentication.nuspec"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#lib/net452/TPJ.ApiAuthentication.dll",
      "@type": "PackageEntry",
      "compressedLength": 3587,
      "fullName": "lib/net452/TPJ.ApiAuthentication.dll",
      "length": 8192,
      "name": "TPJ.ApiAuthentication.dll"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#lib/net46/TPJ.ApiAuthentication.dll",
      "@type": "PackageEntry",
      "compressedLength": 3585,
      "fullName": "lib/net46/TPJ.ApiAuthentication.dll",
      "length": 8192,
      "name": "TPJ.ApiAuthentication.dll"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#lib/net461/TPJ.ApiAuthentication.dll",
      "@type": "PackageEntry",
      "compressedLength": 3580,
      "fullName": "lib/net461/TPJ.ApiAuthentication.dll",
      "length": 8192,
      "name": "TPJ.ApiAuthentication.dll"
    },
    {
      "@id": "https://api.nuget.org/v3/catalog0/data/2018.12.10.23.45.45/tpj.apiauthentication.2.1.0.json#.signature.p7s",
      "@type": "PackageEntry",
      "compressedLength": 9459,
      "fullName": ".signature.p7s",
      "length": 9459,
      "name": ".signature.p7s"
    }
  ],
  "tags": [
    ".net",
    "C#",
    "API",
    "authentication"
  ],
  "@context": {
    "@vocab": "http://schema.nuget.org/schema#",
    "catalog": "http://schema.nuget.org/catalog#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "dependencies": {
      "@id": "dependency",
      "@container": "@set"
    },
    "dependencyGroups": {
      "@id": "dependencyGroup",
      "@container": "@set"
    },
    "packageEntries": {
      "@id": "packageEntry",
      "@container": "@set"
    },
    "supportedFrameworks": {
      "@id": "supportedFramework",
      "@container": "@set"
    },
    "tags": {
      "@id": "tag",
      "@container": "@set"
    },
    "published": {
      "@type": "xsd:dateTime"
    },
    "created": {
      "@type": "xsd:dateTime"
    },
    "lastEdited": {
      "@type": "xsd:dateTime"
    },
    "catalog:commitTimeStamp": {
      "@type": "xsd:dateTime"
    }
  }
}